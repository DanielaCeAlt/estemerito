{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/danie/OneDrive/Documentos/GostCAM%20-%202111%20-%20copia/GostCAM%20-%20Frontend/src/lib/database.ts"],"sourcesContent":["// =============================================\r\n// CONFIGURACI√ìN DE BASE DE DATOS MYSQL\r\n// =============================================\r\n\r\nimport mysql from 'mysql2/promise';\r\nimport { VistaEquipoCompleto, VistaMovimientoDetallado } from '@/types/database';\r\n\r\n// Configuraci√≥n de la conexi√≥n a la base de datos\r\nconst dbConfig = {\r\n  host: process.env.DB_HOST || 'localhost',\r\n  port: parseInt(process.env.DB_PORT || '3306'),\r\n  user: process.env.DB_USER || 'root',\r\n  password: process.env.DB_PASSWORD || '',\r\n  database: process.env.DB_NAME || 'GostCAM',\r\n  charset: 'utf8mb4',\r\n  timezone: '+00:00',\r\n};\r\n\r\n// Pool de conexiones para mejor performance\r\nconst pool = mysql.createPool({\r\n  ...dbConfig,\r\n  waitForConnections: true,\r\n  connectionLimit: 10,\r\n  queueLimit: 0,\r\n});\r\n\r\n// Funci√≥n para obtener una conexi√≥n del pool\r\nexport const getConnection = async () => {\r\n  try {\r\n    const connection = await pool.getConnection();\r\n    return connection;\r\n  } catch (error) {\r\n    console.error('Error connecting to the database:', error);\r\n    throw new Error('Failed to connect to database');\r\n  }\r\n};\r\n\r\n// Funci√≥n para ejecutar queries con manejo de errores\r\nexport const executeQuery = async <T = Record<string, unknown>>(\r\n  query: string,\r\n  params: (string | number | Date | null | undefined)[] = []\r\n): Promise<T[]> => {\r\n  let connection;\r\n  try {\r\n    connection = await getConnection();\r\n    const [rows] = await connection.execute(query, params);\r\n    return rows as T[];\r\n  } catch (error) {\r\n    console.error('Database query error:', error);\r\n    console.error('Query:', query);\r\n    console.error('Params:', params);\r\n    throw error;\r\n  } finally {\r\n    if (connection) {\r\n      connection.release();\r\n    }\r\n  }\r\n};\r\n\r\n// Funci√≥n para ejecutar procedimientos almacenados\r\nexport const callStoredProcedure = async <T = Record<string, unknown>>(\r\n  procedureName: string,\r\n  params: (string | number | Date | null | undefined)[] = []\r\n): Promise<T[]> => {\r\n  const placeholders = params.map(() => '?').join(', ');\r\n  const query = `CALL ${procedureName}(${placeholders})`;\r\n  \r\n  let connection;\r\n  try {\r\n    connection = await getConnection();\r\n    const [rows] = await connection.execute(query, params);\r\n    // Los procedimientos almacenados devuelven arrays anidados\r\n    return Array.isArray(rows) && Array.isArray(rows[0]) ? rows[0] as T[] : rows as T[];\r\n  } catch (error) {\r\n    console.error('Stored procedure error:', error);\r\n    console.error('Procedure:', procedureName);\r\n    console.error('Params:', params);\r\n    throw error;\r\n  } finally {\r\n    if (connection) {\r\n      connection.release();\r\n    }\r\n  }\r\n};\r\n\r\n// Funci√≥n para verificar la conexi√≥n a la base de datos\r\nexport const testConnection = async (): Promise<boolean> => {\r\n  try {\r\n    const result = await executeQuery('SELECT 1 as test');\r\n    return result.length > 0;\r\n  } catch (error) {\r\n    console.error('Database connection test failed:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n// Funci√≥n para cerrar el pool de conexiones\r\nexport const closePool = async (): Promise<void> => {\r\n  try {\r\n    await pool.end();\r\n    console.log('Database pool closed');\r\n  } catch (error) {\r\n    console.error('Error closing database pool:', error);\r\n  }\r\n};\r\n\r\n// Funciones espec√≠ficas para las vistas de GostCAM\r\nexport const getEquiposCompletos = async (filters?: {\r\n  sucursal?: string;\r\n  tipoEquipo?: string;\r\n  estatus?: string;\r\n  usuario?: string;\r\n  busqueda?: string;\r\n}): Promise<VistaEquipoCompleto[]> => {\r\n  // Usar directamente la tabla equipo con una consulta simple\r\n  return await getEquiposFromTable(filters);\r\n};\r\n\r\n// Funci√≥n fallback para consultar tabla equipos directamente\r\nconst getEquiposFromTable = async (filters?: {\r\n  sucursal?: string;\r\n  tipoEquipo?: string;\r\n  estatus?: string;\r\n  usuario?: string;\r\n  busqueda?: string;\r\n}): Promise<VistaEquipoCompleto[]> => {\r\n  let query = `\r\n    SELECT \r\n      e.no_serie,\r\n      e.nombreEquipo,\r\n      e.numeroActivo,\r\n      e.modelo,\r\n      e.fechaAlta,\r\n      e.idPosicion,\r\n      te.nombreTipo as TipoEquipo,\r\n      ee.estatus as EstatusEquipo,\r\n      COALESCE(s.Sucursal, 'Centro Principal') as SucursalActual,\r\n      u.NombreUsuario as UsuarioAsignado\r\n    FROM equipo e\r\n    LEFT JOIN tipoequipo te ON e.idTipoEquipo = te.idTipoEquipo\r\n    LEFT JOIN estatusequipo ee ON e.idEstatus = ee.idEstatus\r\n    LEFT JOIN usuarios u ON e.idUsuarios = u.idUsuarios\r\n    LEFT JOIN posicionequipo pe ON e.idPosicion = pe.idPosicion\r\n    LEFT JOIN sucursales s ON pe.idCentro = s.idCentro\r\n  `;\r\n  \r\n  const params: (string | number | Date | null | undefined)[] = [];\r\n  const conditions: string[] = [];\r\n\r\n  // ‚úÖ Filtrar equipos eliminados l√≥gicamente\r\n  conditions.push('(e.eliminado IS NULL OR e.eliminado = 0)');\r\n\r\n  if (filters) {\r\n    if (filters.tipoEquipo) {\r\n      conditions.push('te.nombreTipo = ?');\r\n      params.push(filters.tipoEquipo);\r\n    }\r\n    if (filters.estatus) {\r\n      conditions.push('ee.estatus = ?');\r\n      params.push(filters.estatus);\r\n    }\r\n    if (filters.sucursal) {\r\n      conditions.push('s.Sucursal = ?');\r\n      params.push(filters.sucursal);\r\n    }\r\n    if (filters.usuario) {\r\n      conditions.push('u.NombreUsuario LIKE ?');\r\n      params.push(`%${filters.usuario}%`);\r\n    }\r\n    if (filters.busqueda) {\r\n      // B√∫squeda global en todos los campos principales (funci√≥n fallback)\r\n      conditions.push(`(\r\n        e.nombreEquipo LIKE ? OR \r\n        e.no_serie LIKE ? OR \r\n        e.numeroActivo LIKE ? OR\r\n        e.modelo LIKE ? OR\r\n        te.nombreTipo LIKE ? OR\r\n        ee.estatus LIKE ? OR\r\n        s.Sucursal LIKE ? OR\r\n        u.NombreUsuario LIKE ?\r\n      )`);\r\n      // Repetir el t√©rmino de b√∫squeda para cada campo\r\n      const termino = `%${filters.busqueda}%`;\r\n      params.push(termino, termino, termino, termino, termino, termino, termino, termino);\r\n    }\r\n  }\r\n\r\n  if (conditions.length > 0) {\r\n    query += ' WHERE ' + conditions.join(' AND ');\r\n  }\r\n\r\n  query += ' ORDER BY e.fechaAlta DESC';\r\n\r\n  const result = await executeQuery<VistaEquipoCompleto>(query, params);\r\n  \r\n  return result;\r\n};\r\n\r\nexport const getMovimientosDetallados = async (filters?: {\r\n  sucursalOrigen?: string;\r\n  sucursalDestino?: string;\r\n  tipoMovimiento?: string;\r\n  estatusMovimiento?: string;\r\n  fechaDesde?: string;\r\n  fechaHasta?: string;\r\n}): Promise<VistaMovimientoDetallado[]> => {\r\n  let query = 'SELECT * FROM VistaMovimientosDetallados';\r\n  const params: (string | number | Date | null | undefined)[] = [];\r\n  const conditions: string[] = [];\r\n\r\n  if (filters) {\r\n    if (filters.sucursalOrigen) {\r\n      conditions.push('SucursalOrigen = ?');\r\n      params.push(filters.sucursalOrigen);\r\n    }\r\n    if (filters.sucursalDestino) {\r\n      conditions.push('SucursalDestino = ?');\r\n      params.push(filters.sucursalDestino);\r\n    }\r\n    if (filters.tipoMovimiento) {\r\n      conditions.push('tipoMovimiento = ?');\r\n      params.push(filters.tipoMovimiento);\r\n    }\r\n    if (filters.estatusMovimiento) {\r\n      conditions.push('estatusMovimiento = ?');\r\n      params.push(filters.estatusMovimiento);\r\n    }\r\n    if (filters.fechaDesde) {\r\n      conditions.push('fecha >= ?');\r\n      params.push(filters.fechaDesde);\r\n    }\r\n    if (filters.fechaHasta) {\r\n      conditions.push('fecha <= ?');\r\n      params.push(filters.fechaHasta);\r\n    }\r\n  }\r\n\r\n  if (conditions.length > 0) {\r\n    query += ' WHERE ' + conditions.join(' AND ');\r\n  }\r\n\r\n  query += ' ORDER BY fecha DESC';\r\n\r\n  return executeQuery<VistaMovimientoDetallado>(query, params);\r\n};\r\n\r\nexport const getInventarioPorEstatus = async () => {\r\n  return executeQuery('SELECT * FROM VistaInventarioPorEstatus ORDER BY estatus, TipoEquipo');\r\n};\r\n\r\n// Funci√≥n para obtener todos los cat√°logos del sistema\r\nexport const getCatalogos = async () => {\r\n  try {\r\n    console.log('Obteniendo cat√°logos...');\r\n    \r\n    // Funci√≥n auxiliar para ejecutar consultas con fallback\r\n    const executeWithFallback = async (query: string, fallback: any[] = []) => {\r\n      try {\r\n        return await executeQuery(query);\r\n      } catch (error) {\r\n        console.warn(`Query failed: ${query}`, error);\r\n        return fallback;\r\n      }\r\n    };\r\n\r\n    // Obtener cat√°logos b√°sicos que probablemente existan\r\n    const usuarios = await executeWithFallback('SELECT * FROM usuarios', []);\r\n    \r\n    // Para tipos de equipo, intentar m√∫ltiples variantes\r\n    const tiposEquipo = await executeWithFallback('SELECT * FROM tipoequipo', []);\r\n    \r\n    // Para estatus, intentar m√∫ltiples variantes  \r\n    const estatusEquipos = await executeWithFallback('SELECT * FROM estatusequipo', []);\r\n    \r\n    // Para posiciones, usar valores por defecto si no existe\r\n    const posiciones = await executeWithFallback('SELECT * FROM posiciones', [\r\n      { id: 1, nombre: 'Entrada Principal' },\r\n      { id: 2, nombre: 'Recepci√≥n' },\r\n      { id: 3, nombre: 'Oficina' }\r\n    ]);\r\n\r\n    // Para sucursales, intentar obtener de la tabla de equipos o crear por defecto\r\n    const sucursales = await executeWithFallback('SELECT DISTINCT SucursalActual as nombre, SucursalActual as id FROM equipos WHERE SucursalActual IS NOT NULL AND SucursalActual != \"\"', [\r\n      { id: 'SUC001', nombre: 'Sucursal Principal' },\r\n      { id: 'SUC002', nombre: 'Sucursal Norte' },\r\n      { id: 'SUC003', nombre: 'Sucursal Sur' }\r\n    ]);\r\n\r\n    return {\r\n      tiposEquipo,\r\n      estatusEquipos,\r\n      usuarios,\r\n      posiciones,\r\n      sucursales,\r\n      // Cat√°logos adicionales vac√≠os por ahora\r\n      estados: [],\r\n      municipios: [],\r\n      zonas: []\r\n    };\r\n  } catch (error) {\r\n    console.error('Error obteniendo cat√°logos:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getHistorialMovimientos = async (no_serie?: string) => {\r\n  if (no_serie) {\r\n    return executeQuery('SELECT * FROM VistaHistorialMovimientos WHERE no_serie = ? ORDER BY fecha DESC', [no_serie]);\r\n  }\r\n  return executeQuery('SELECT * FROM VistaHistorialMovimientos ORDER BY fecha DESC LIMIT 100');\r\n};\r\n\r\nexport default pool;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 422, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/danie/OneDrive/Documentos/GostCAM%20-%202111%20-%20copia/GostCAM%20-%20Frontend/src/app/api/equipos/route.ts"],"sourcesContent":["// =============================================\r\n// API: GESTI√ìN DE EQUIPOS\r\n// =============================================\r\n\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport { executeQuery, getEquiposCompletos } from '@/lib/database';\r\nimport { VistaEquipoCompleto, ApiResponse } from '@/types/database';\r\n\r\n// GET: Obtener equipos con filtros\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    console.log('API Equipos GET llamada');\r\n    \r\n    const { searchParams } = new URL(request.url);\r\n    \r\n    const filters = {\r\n      sucursal: searchParams.get('sucursal') || undefined,\r\n      tipoEquipo: searchParams.get('tipoEquipo') || undefined,\r\n      estatus: searchParams.get('estatus') || undefined,\r\n      usuario: searchParams.get('usuario') || undefined,\r\n      busqueda: searchParams.get('busqueda') || undefined\r\n    };\r\n\r\n    // Remover filtros vac√≠os\r\n    Object.keys(filters).forEach(key => {\r\n      if (filters[key as keyof typeof filters] === undefined) {\r\n        delete filters[key as keyof typeof filters];\r\n      }\r\n    });\r\n\r\n    console.log('Filtros aplicados:', filters);\r\n\r\n    const equipos = await getEquiposCompletos(filters);\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      data: equipos,\r\n      message: 'Equipos obtenidos exitosamente'\r\n    } as ApiResponse<VistaEquipoCompleto[]>, { status: 200 });\r\n\r\n  } catch (error) {\r\n    console.error('Error obteniendo equipos:', error);\r\n    return NextResponse.json({\r\n      success: false,\r\n      error: 'Error interno del servidor'\r\n    } as ApiResponse<VistaEquipoCompleto[]>, { status: 500 });\r\n  }\r\n}\r\n\r\n// POST: Crear nuevo equipo\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const body = await request.json();\r\n    // Normalizar nombres de campos para compatibilidad\r\n    const noSerie = body.noSerie || body.no_serie;\r\n    const idUsuarios = body.idUsuarios || body.usuarioAsignado;\r\n    \r\n    console.log('üì¶ Datos recibidos para crear equipo:', body);\r\n    \r\n    // Validar campos requeridos (usando valores normalizados)\r\n    const camposRequeridos = [\r\n      { campo: 'noSerie', valor: noSerie },\r\n      { campo: 'nombreEquipo', valor: body.nombreEquipo },\r\n      { campo: 'modelo', valor: body.modelo },\r\n      { campo: 'idTipoEquipo', valor: body.idTipoEquipo },\r\n      { campo: 'idEstatus', valor: body.idEstatus },\r\n      { campo: 'idSucursal', valor: body.idSucursal }\r\n    ];\r\n    \r\n    for (const { campo, valor } of camposRequeridos) {\r\n      if (!valor) {\r\n        console.log(`‚ùå Campo faltante: ${campo}`, valor);\r\n        return NextResponse.json({\r\n          success: false,\r\n          error: `El campo ${campo} es requerido`,\r\n          message: 'Datos incompletos'\r\n        } as ApiResponse<any>, { status: 400 });\r\n      }\r\n    }\r\n\r\n    // Funciones de mapeo para convertir IDs a nombres\r\n    const mapearTipoEquipo = async (id: number): Promise<string> => {\r\n      const tipos = await executeQuery(`\r\n        SELECT TipoEquipo \r\n        FROM (\r\n          SELECT ROW_NUMBER() OVER (ORDER BY TipoEquipo) as rownum, TipoEquipo\r\n          FROM (SELECT DISTINCT TipoEquipo FROM GostCAM.VistaEquiposCompletos WHERE TipoEquipo IS NOT NULL) tipos\r\n        ) t \r\n        WHERE rownum = ?\r\n      `, [id]);\r\n      return tipos.length > 0 ? (tipos[0] as any).TipoEquipo : '';\r\n    };\r\n\r\n    const mapearSucursal = async (idOCodigo: string | number): Promise<number> => {\r\n      console.log(`üîç Mapeando sucursal ID/C√≥digo: ${idOCodigo} (tipo: ${typeof idOCodigo})`);\r\n      \r\n      if (!idOCodigo) {\r\n        console.log('‚ùå ID de sucursal vac√≠o, usando fallback');\r\n        return 1;\r\n      }\r\n      \r\n      try {\r\n        let idCentro: string;\r\n        \r\n        // Si es un string, asumimos que es un c√≥digo de centro (T008, T011, etc.)\r\n        if (typeof idOCodigo === 'string') {\r\n          idCentro = idOCodigo;\r\n          console.log(`üìç Usando c√≥digo de centro directamente: ${idCentro}`);\r\n        } else {\r\n          // Si es un n√∫mero, buscamos en el cat√°logo\r\n          const sucursales = await executeQuery(`\r\n            SELECT idCentro, Sucursal\r\n            FROM (\r\n              SELECT ROW_NUMBER() OVER (ORDER BY Sucursal) as rownum, idCentro, Sucursal\r\n              FROM sucursales\r\n            ) s \r\n            WHERE rownum = ?\r\n          `, [idOCodigo]);\r\n          \r\n          if (sucursales.length === 0) {\r\n            console.log(`‚ùå No se encontr√≥ sucursal con ID ${idOCodigo}`);\r\n            return 1;\r\n          }\r\n          \r\n          idCentro = (sucursales[0] as any).idCentro;\r\n          console.log(`üìç ID ${idOCodigo} mapeado a centro: ${idCentro}`);\r\n        }\r\n        \r\n        // Obtener primera posici√≥n del centro\r\n        const posicion = await executeQuery(`\r\n          SELECT p.idPosicion, p.NombrePosicion, s.Sucursal\r\n          FROM posicionequipo p \r\n          JOIN sucursales s ON p.idCentro = s.idCentro\r\n          WHERE p.idCentro = ?\r\n          ORDER BY p.idPosicion\r\n          LIMIT 1\r\n        `, [idCentro]);\r\n        \r\n        if (posicion.length > 0) {\r\n          const idPosicionResult = (posicion[0] as any).idPosicion;\r\n          console.log(`‚úÖ Posici√≥n asignada: ${idPosicionResult} (${(posicion[0] as any).NombrePosicion}) en ${(posicion[0] as any).Sucursal}`);\r\n          return idPosicionResult;\r\n        }\r\n        \r\n        console.log('‚ùå No se encontr√≥ posici√≥n para el centro');\r\n        return 1;\r\n        \r\n      } catch (error) {\r\n        console.error('‚ùå Error en mapearSucursal:', error);\r\n        return 1;\r\n      }\r\n    };\r\n\r\n    const mapearUsuario = async (idONombre: string | number): Promise<number> => {\r\n      if (!idONombre) return 1; // Usuario por defecto\r\n      \r\n      // Si ya es un n√∫mero, devolverlo directamente\r\n      if (typeof idONombre === 'number') {\r\n        console.log(`‚úÖ Usuario ID recibido: ${idONombre}`);\r\n        return idONombre;\r\n      }\r\n      \r\n      // Si es string, buscar por nombre\r\n      try {\r\n        const usuarios = await executeQuery(`\r\n          SELECT ROW_NUMBER() OVER (ORDER BY UsuarioAsignado) as rownum, UsuarioAsignado\r\n          FROM (\r\n            SELECT DISTINCT UsuarioAsignado \r\n            FROM GostCAM.VistaEquiposCompletos \r\n            WHERE UsuarioAsignado IS NOT NULL AND UsuarioAsignado != ''\r\n          ) usuarios\r\n          ORDER BY UsuarioAsignado\r\n        `);\r\n        \r\n        // Buscar usuario por nombre\r\n        const usuarioEncontrado = usuarios.find((u: any) => \r\n          u.UsuarioAsignado.toLowerCase() === idONombre.toLowerCase()\r\n        );\r\n        \r\n        if (usuarioEncontrado) {\r\n          console.log(`‚úÖ Usuario \"${idONombre}\" mapeado a ID: ${(usuarioEncontrado as any).rownum}`);\r\n          return (usuarioEncontrado as any).rownum;\r\n        }\r\n        \r\n        console.log(`‚ö†Ô∏è Usuario \"${idONombre}\" no encontrado, usando ID por defecto`);\r\n        return 1; // Usuario por defecto si no se encuentra\r\n        \r\n      } catch (error) {\r\n        console.error('‚ùå Error en mapearUsuario:', error);\r\n        return 1;\r\n      }\r\n    };\r\n\r\n    const mapearEstatus = async (id: number): Promise<string> => {\r\n      const estatus = await executeQuery(`\r\n        SELECT EstatusEquipo \r\n        FROM (\r\n          SELECT ROW_NUMBER() OVER (ORDER BY EstatusEquipo) as rownum, EstatusEquipo\r\n          FROM (SELECT DISTINCT EstatusEquipo FROM GostCAM.VistaEquiposCompletos WHERE EstatusEquipo IS NOT NULL) estatus\r\n        ) e \r\n        WHERE rownum = ?\r\n      `, [id]);\r\n      return estatus.length > 0 ? (estatus[0] as any).EstatusEquipo : '';\r\n    };\r\n\r\n    // Convertir IDs a nombres reales\r\n    console.log('üì• Datos recibidos - idSucursal:', body.idSucursal, 'tipo:', typeof body.idSucursal);\r\n    \r\n    const tipoEquipoNombre = await mapearTipoEquipo(parseInt(body.idTipoEquipo));\r\n    // Mapear sucursal usando el c√≥digo directamente\r\n    const idPosicion = await mapearSucursal(body.idSucursal);\r\n    const idUsuarioFinal = await mapearUsuario(idUsuarios);\r\n    const estatusNombre = await mapearEstatus(parseInt(body.idEstatus));\r\n\r\n    console.log('üìä Mapeos realizados:');\r\n    console.log('- Tipo Equipo:', body.idTipoEquipo, '->', tipoEquipoNombre);\r\n    console.log('- idPosicion calculada:', idPosicion);\r\n    console.log('- Usuario:', idUsuarios, '->', idUsuarioFinal);\r\n    console.log('- Estatus:', body.idEstatus, '->', estatusNombre);\r\n\r\n    console.log('üì¶ Datos a insertar:');\r\n    console.log('- No. Serie:', noSerie);\r\n    console.log('- Nombre Equipo:', body.nombreEquipo);\r\n    console.log('- Modelo:', body.modelo);\r\n    console.log('- Tipo Equipo ID:', body.idTipoEquipo, '(', tipoEquipoNombre, ')');\r\n    console.log('- Estatus ID:', body.idEstatus, '(', estatusNombre, ')');\r\n    console.log('- Usuario ID:', idUsuarioFinal);\r\n    console.log('- Posici√≥n ID:', idPosicion);\r\n\r\n    // Verificar si el n√∫mero de serie ya existe\r\n    const equipoExistente = await executeQuery(\r\n      'SELECT no_serie FROM Equipo WHERE no_serie = ?',\r\n      [noSerie]\r\n    );\r\n\r\n    if (equipoExistente.length > 0) {\r\n      return NextResponse.json({\r\n        success: false,\r\n        error: 'El n√∫mero de serie ya existe',\r\n        message: 'No se puede crear el equipo'\r\n      } as ApiResponse<any>, { status: 409 });\r\n    }\r\n\r\n    // Insertar equipo en la base de datos\r\n    const query = `\r\n      INSERT INTO Equipo (\r\n        no_serie, nombreEquipo, modelo, numeroActivo, \r\n        idTipoEquipo, idEstatus, idUsuarios, idPosicion\r\n      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?)\r\n    `;\r\n\r\n    const valores = [\r\n      noSerie,\r\n      body.nombreEquipo, // Usar directamente el nombreEquipo del formulario\r\n      body.modelo,\r\n      body.numeroActivo || noSerie,\r\n      body.idTipoEquipo,  // ID num√©rico del tipo de equipo\r\n      body.idEstatus,     // ID num√©rico del estatus\r\n      idUsuarioFinal,     // ID num√©rico del usuario mapeado\r\n      idPosicion     // ID de posici√≥n calculado para la sucursal\r\n    ];\r\n\r\n    await executeQuery(query, valores);\r\n\r\n    console.log('‚úÖ Equipo creado exitosamente');\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      data: {\r\n        no_serie: noSerie,\r\n        mensaje: 'Equipo insertado correctamente'\r\n      },\r\n      message: 'Equipo creado exitosamente'\r\n    } as ApiResponse<any>, { status: 201 });\r\n\r\n  } catch (error) {\r\n    console.error('üí• Error creando equipo:', error);\r\n    \r\n    return NextResponse.json({\r\n      success: false,\r\n      error: 'Error interno del servidor',\r\n      details: error instanceof Error ? error.message : 'Error desconocido',\r\n      message: 'No se pudo crear el equipo'\r\n    } as ApiResponse<any>, { status: 500 });\r\n  }\r\n}\r\n\r\n// PUT: Actualizar equipo existente\r\nexport async function PUT(request: NextRequest) {\r\n  try {\r\n    const body = await request.json();\r\n    const { no_serie } = body;\r\n\r\n    // Validar campos requeridos\r\n    if (!no_serie) {\r\n      return NextResponse.json({\r\n        success: false,\r\n        error: 'N√∫mero de serie es requerido'\r\n      } as ApiResponse<any>, { status: 400 });\r\n    }\r\n\r\n    // Verificar si el equipo existe\r\n    const existingEquipo = await executeQuery(\r\n      'SELECT no_serie FROM Equipo WHERE no_serie = ?',\r\n      [no_serie]\r\n    );\r\n\r\n    if (existingEquipo.length === 0) {\r\n      return NextResponse.json({\r\n        success: false,\r\n        error: 'Equipo no encontrado'\r\n      } as ApiResponse<any>, { status: 404 });\r\n    }\r\n\r\n    // Construir query de actualizaci√≥n din√°micamente\r\n    const campos = [];\r\n    const valores = [];\r\n    \r\n    if (body.nombreEquipo) {\r\n      campos.push('nombreEquipo = ?');\r\n      valores.push(body.nombreEquipo);\r\n    }\r\n    if (body.modelo) {\r\n      campos.push('modelo = ?');\r\n      valores.push(body.modelo);\r\n    }\r\n    if (body.idTipoEquipo) {\r\n      campos.push('idTipoEquipo = ?');\r\n      valores.push(parseInt(body.idTipoEquipo));\r\n    }\r\n    if (body.idEstatus) {\r\n      campos.push('idEstatus = ?');\r\n      valores.push(parseInt(body.idEstatus));\r\n    }\r\n    if (body.idSucursal) {\r\n      campos.push('idSucursal = ?');\r\n      valores.push(parseInt(body.idSucursal));\r\n    }\r\n    if (body.idUsuarios) {\r\n      campos.push('idUsuarios = ?');\r\n      valores.push(parseInt(body.idUsuarios));\r\n    }\r\n\r\n    if (campos.length === 0) {\r\n      return NextResponse.json({\r\n        success: false,\r\n        error: 'No hay campos para actualizar'\r\n      } as ApiResponse<any>, { status: 400 });\r\n    }\r\n\r\n    valores.push(no_serie);\r\n\r\n    // Actualizar equipo\r\n    await executeQuery(`\r\n      UPDATE Equipos \r\n      SET ${campos.join(', ')}\r\n      WHERE no_serie = ?\r\n    `, valores);\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      message: 'Equipo actualizado exitosamente'\r\n    } as ApiResponse<any>, { status: 200 });\r\n\r\n  } catch (error) {\r\n    console.error('Error actualizando equipo:', error);\r\n    return NextResponse.json({\r\n      success: false,\r\n      error: 'Error interno del servidor'\r\n    } as ApiResponse<any>, { status: 500 });\r\n  }\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}